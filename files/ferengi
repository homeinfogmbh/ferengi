#! /usr/bin/env python3
"""ferengi

Greedy data acquisition

Usage:
    ferengi openweathermap [options]
    ferengi wettercom [options]

Options:
    --help, -h          Show this page.
    --force, -f         Force data import.
"""
from sys import stderr
from docopt import docopt
from ferengi.api import APIError


if __name__ == '__main__':
    options = docopt(__doc__)
    force = options['--force']

    if options['openweathermap']:
        from ferengi.openweathermap import City

        try:
            City.update_all()
        except APIError as e:
            print('Caught API error ({}): {}'.format(int(e), str(e)),
                  file=stderr)
            exit(1)
    elif options['wettercom']:
        from ferengi.wettercom import City

        try:
            City.update_all()
        except APIError as e:
            print('Caught API error ({}): {}'.format(int(e), str(e)),
                  file=stderr)
            exit(1)
