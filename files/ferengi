#! /usr/bin/env python3
"""ferengi

Greedy data acquisition

Usage:
    ferengi openweathermap [options]
    ferengi roa

Options:
    --help, -h          Show this page.
    --force, -f         Force data import.
"""
from sys import stderr, exit as exit_

from docopt import docopt

from ferengi.api import APIError, roa
from ferengi.openweathermap import City


def main(options):
    """Runs the FERENGI client."""

    force = options['--force']

    if options['openweathermap']:
        try:
            City.update_all()
        except APIError as api_error:
            print('Caught API error ({}): {}'.format(
                int(api_error), str(api_error)), file=stderr)
            return 1
    elif options['roa']:
        print(roa())

    return 0


if __name__ == '__main__':
    exit_(main(docopt(__doc__)))
